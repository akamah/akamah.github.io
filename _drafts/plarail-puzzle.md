---
layout: math
title:  "プラレール線型代数 (2) レールパズルへの応用"
---

## パズル
前回の[プラレール線型代数]()の考え方を使って，三谷先生の[レールパズル](http://mitani.cs.tsukuba.ac.jp/ja/software/railway_puzzle/index.html) を解いてみようと思います．
挑戦するのは問題番号40番です．画像はこのページからお借りしました．

特徴的なのは，S字に6本の曲線レールがつながっていることでしょうか．
この完成途中のレイアウトは，縦横方向のほかに左下方向に長さ6の成分を含んでいます．

つまり，右上方向の成分を持つレールを6つつなげて打ち消しつつ，縦横を合わせれば原点に戻ってこれそうです．

使えるレールは13本，うち6本は向きを合わせるため反時計回りの曲線レールに充てます，
そして残りのうち6本は右上の成分を持つレールをつなげるので，残りの1本は縦か横につなぎます．

また，基本的に曲線レール用いてななめの成分を作るときは，2本使ってS字レールの単位で作ります．
これはS字レールは端点の向きを変えないため，扱いが楽であるという理由からです．

この問題の場合は，ななめに直線レールを敷く時も2本単位で考えれば良さそうです．

さて，右上方向の成分を2つ持つレールの組み合わせは次の3種類になります．

- 
-
-

これらの組み合わせを使ったら繋がりそうです，早速やってみましょう．
ちょっと左に1回行って回りつつS字をはさんで直線を2本っと.....あれ？

も，もう一回やってみましょう，今度は直線を上方向のS字にしてみます．

む，ななめ方向は完全に解消したのにつながらない，でもこれなら途中の横方向を縦に直せば繋がりそうです．

はい，完成です！ななめの成分を考えることで，使うレールの選択肢を狭めて効率的にパズルを解けました．
