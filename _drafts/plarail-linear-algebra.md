---
layout: math
title:  "プラレール線型代数"
---

この記事は[夏合宿]()の成果を寒くなった頃にまとめたものです．


## 概要
本記事では，プラレールを線型代数的な視点から眺めることで，
レイアウトの理解，特に曲線レールに対する解釈を試みます．

## レールのベクトル
プラレールには様々なレールがありますが，代表的なレールは直線レールと曲線レールです．
直線レールの長さを1とすると，曲線レールは半径が長さ1の円周の8分の1の円弧です．

（画像があるといい）

線型代数的な解釈ということで，*レールの持つベクトル*というものを考えてみます．
これはレールの片方を原点として，もう片方へ向かうベクトルとします．

（図，あからさまな幾何平面に縦横にレールが置いてある）

さっそくベクトルの合成を考えます．
レールの持つベクトルを合成するときは，実際のレールに必要な「ちゃんと向きが合っている」という条件を無視することにします．
すなわち，位置さえ正確に合っていればレールをつないで伸ばせる，と都合よく考えます．
この仮定はレールをベクトルとして考えるためのやや人為的なもので，
例えば以下のような連結もベクトルとして考える場合はちょっと許してしまおうということです [^jmitani]．

（図，やばい連結）

さてさて，曲線レールのベクトルも描いてみましょう．すると不思議なこと（？）が起こります．

（図）

原点から伸びた先の点はどういった座標になるでしょうか？計算してみます．

（図，円を描いて中心との線とか補助線をピッと引いてみる）

$$ (x, y) = (1 - 1 / \sqrt{2}, 1 / \sqrt{2}) $$

平方根が出てきました．でも平方根ってちょっとめんどくさいですね．
もうすこし分かりやすく曲線レールの持つベクトルを表せないでしょうか．

## 曲線レール
ところで，円の中心から周への距離は等しく長さ1であり，曲線レールが8分の1の円弧であることを考えると，
次のように，**2つの直線の連結**だと捉えることもできます．

（図）

すると，曲線レールのベクトルは，**タテまたはヨコ方向**と**ななめ方向**の長さ1のベクトルを連結したものと言えます．
すなわち，ベクトルとして考えることによって曲線レールを直線2つだと捉えることができるようになりました．

## レールのベクトルの表現
さて，ここまでくれば直線レールおよび曲線レールのベクトルを素直に表す方法がひとつ思いつきます．
まず，$$ \boldsymbol{x} $$ と $$ \boldsymbol{y} $$をxy平面の標準基底とします．
そして，以下のように基底ベクトルを取ります．

\begin{align}
\boldsymbol{a} &= \boldsymbol{x} \\
\boldsymbol{b} &= \frac{\boldsymbol{x} + \boldsymbol{y}}{\sqrt{2}} \\
\boldsymbol{c} &= \boldsymbol{x} \\
\boldsymbol{b} &= \frac{-\boldsymbol{x} + \boldsymbol{y}}{\sqrt{2}} \\
\end{align}

そして**a** = **x**, **b** = 1/sqrt(2)(**x**+**y**), **c** = **y**, **d** = 1/sqrt(2)(-**x**+**y**)
という4つの基底ベクトルの**整数**線形結合でレール上の座標系を表します．

(図，a, b, c, d)

こうすると，例えば横に伸びる直線レールのベクトルは(a, b, c, d) = (1, 0, 0, 0),
縦においた直線レールのベクトルは(a, b, c, d) = (0, 0, 1, 0)のように表されます．
問題の曲線レールですが，原点から**y**軸方向に沿って置いた場合のベクトルは(a, b, c, d) = (1, 0, 0, 1)となります．

（図）

## S字
ここで現実のプラレールにおけるレイアウトで度々問題となる，S字に配置した曲線レールについて考えてみます．
先ほど導入したベクトルの表現を用いると，以下のようにS字につないだレールのベクトルは(2, 0, 0, 2)になります．

（図）

これを用いて*れいの法則*[^lay]を確認してみようと思います．
れいの法則とは，以下の2通りのレールが同じ地点にたどり着くという法則です

（図）



## れいの法則，行田の法則

　



## パズル




## 回転の話



[^jmitani]: 補足しますと，[三谷先生の結果](https://twitter.com/jmitani/status/864846261517656064) より，レールのはじっこの位置を変えずに向きを変えることはできるため，方向についてはひとまず考えなくてもよいことになります．
[^lay]: この議論で登場しています： [プラレールの組み合わせの法則議論](https://togetter.com/li/1070425)
